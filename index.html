<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mind Abacus</title>

    <!-- Иконка -->
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />

    <!-- Шрифты -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&family=Montserrat:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <!-- Стили -->
    <link rel="stylesheet" href="./styles.css" />
    <link rel="stylesheet" href="./ext/trainer-ext.css" />
  </head>

  <body class="game-screen">
    <header class="app-header">
      <div class="app-header__brand">
        <img
          src="./assets/logo.png"
          alt="Mind Abacus logo"
          class="app-header__logo"
        />

        <div class="app-header__titles">
          <h1 id="appTitle" class="app-header__title">
            <span class="title-main">Mind Abacus</span>
            <span class="title-sub">Думай быстро. Считай с умом.</span>
          </h1>
          <h2 id="appTagline" class="app-header__tagline">
            Тренажёр ментальной арифметики
          </h2>
        </div>
      </div>

      <!-- Переключатель языков -->
      <div id="languageSwitcher" class="app-header__languages"></div>
    </header>

    <main id="app" class="app-main" role="main"></main>

    <footer id="appFooter" class="app-footer">MindWorld School © 2025</footer>

    <!-- Детектор языка -->
    <script>
      (function () {
        const params = new URLSearchParams(window.location.search);
        let lang = params.get("lang");

        // 1. Проверяем URL
        if (lang !== "ua" && lang !== "en") {
          // 2. Если нет — пробуем взять из localStorage
          const saved = localStorage.getItem("mws_lang");
          if (saved === "ua" || saved === "en") {
            lang = saved;
          } else {
            // 3. Язык по умолчанию
            lang = "ua";
          }
        }

        // 4. Сохраняем язык
        localStorage.setItem("mws_lang", lang);

        // 5. Передаём язык в main.js
        window.APP_LANG = lang;

        // 6. Обновляем lang в <html>
        document.documentElement.lang = lang === "en" ? "en" : "uk";
      })();
    </script>

    <!-- Основной JS -->
    <script type="module" src="./main.js"></script>
  </body>
</html>
